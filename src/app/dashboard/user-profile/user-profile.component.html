<div class="container flex align-items-center justify-content-center">
  <mat-card style="width: 40%">
    <mat-card-header>
      <mat-card-title>Perfil</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="form" autocomplete="off">
        <p>
          <mat-form-field
            appearance="outline"
            style="width: 45%; margin-right: 10%"
          >
            <mat-label>Correo Electronico</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              autocomplete="off"
            />
            <mat-icon matSuffix>mail_outline</mat-icon>
            <mat-hint
              *ngIf="
                form.controls['email'].invalid &&
                (form.controls['email'].dirty || form.controls['email'].touched)
              "
              class="warn"
            >
              <ng-container *ngIf="form.controls['email'].errors?.required">
                Este campo es requerido.
              </ng-container>
              <ng-container *ngIf="form.controls['email'].errors?.email"
                >Formato incorrecto.</ng-container
              >
            </mat-hint>
          </mat-form-field>
          <mat-form-field appearance="outline" style="width: 45%">
            <mat-label>Usuario</mat-label>
            <input matInput formControlName="username" autocomplete="off" />
            <mat-icon matSuffix>face</mat-icon>
            <mat-hint
              *ngIf="
                form.controls['username'].invalid &&
                (form.controls['username'].dirty ||
                  form.controls['username'].touched)
              "
              class="warn"
            >
              <ng-container *ngIf="form.controls['username'].errors?.required">
                Este campo es requerido.
              </ng-container>
            </mat-hint>
          </mat-form-field>
        </p>
        <p>
          <mat-form-field
            appearance="outline"
            style="width: 45%; margin-right: 10%"
          >
            <mat-label>Nombre</mat-label>
            <input matInput formControlName="name" autocomplete="off" />
            <mat-icon matSuffix>person_outline</mat-icon>
            <mat-hint
              *ngIf="
                form.controls['name'].invalid &&
                (form.controls['name'].dirty || form.controls['name'].touched)
              "
              class="warn"
            >
              <ng-container *ngIf="form.controls['name'].errors?.required">
                Este campo es requerido.
              </ng-container>
            </mat-hint>
          </mat-form-field>
          <mat-form-field appearance="outline" style="width: 45%">
            <mat-label>Apellido</mat-label>
            <input matInput formControlName="lastName" autocomplete="off" />
            <mat-icon matSuffix>person_outline</mat-icon>
            <mat-hint
              *ngIf="
                form.controls['lastName'].invalid &&
                (form.controls['lastName'].dirty ||
                  form.controls['lastName'].touched)
              "
              class="warn"
            >
              <ng-container *ngIf="form.controls['lastName'].errors?.required">
                Este campo es requerido.
              </ng-container>
            </mat-hint>
          </mat-form-field>
        </p>
        <p>
          <mat-form-field appearance="outline" style="width: 100%">
            <mat-label>Fecha de nacimiento</mat-label>
            <input
              matInput
              [matDatepicker]="picker"
              formControlName="birthDate"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-hint
              *ngIf="
                form.controls['birthDate'].invalid &&
                (form.controls['birthDate'].dirty ||
                  form.controls['birthDate'].touched)
              "
              class="warn"
            >
              <ng-container *ngIf="form.controls['birthDate'].errors?.required">
                Este campo es requerido.
              </ng-container>
              <ng-container *ngIf="form.controls['birthDate'].errors?.email"
                >Formato incorrecto.</ng-container
              >
            </mat-hint>
          </mat-form-field>
        </p>
        <p>
          <mat-form-field
            appearance="outline"
            style="width: 45%; margin-right: 10%"
          >
            <mat-label>Numero de telefono</mat-label>
            <input matInput formControlName="phoneNumber" autocomplete="off" />
            <mat-icon matSuffix>call</mat-icon>
            <mat-hint
              *ngIf="
                form.controls['phoneNumber'].invalid &&
                (form.controls['phoneNumber'].dirty ||
                  form.controls['phoneNumber'].touched)
              "
              class="warn"
            >
              <ng-container
                *ngIf="form.controls['phoneNumber'].errors?.required"
              >
                Este campo es requerido.
              </ng-container>
            </mat-hint>
          </mat-form-field>
          <mat-form-field appearance="outline" style="width: 45%">
            <mat-label>Color Favorito</mat-label>
            <input
              matInput
              formControlName="favoriteColor"
              autocomplete="off"
            />
            <mat-icon matSuffix>invert_colors</mat-icon>
            <mat-hint
              *ngIf="
                form.controls['favoriteColor'].invalid &&
                (form.controls['favoriteColor'].dirty ||
                  form.controls['favoriteColor'].touched)
              "
              class="warn"
            >
              <ng-container
                *ngIf="form.controls['favoriteColor'].errors?.required"
              >
                Este campo es requerido.
              </ng-container>
            </mat-hint>
          </mat-form-field>
        </p>
        <p>
          <mat-form-field appearance="outline" style="width: 100%">
            <mat-label>Pais de Residencia</mat-label>
            <input matInput formControlName="country" autocomplete="off" />
            <mat-icon matSuffix>outlined_flag</mat-icon>
            <mat-hint
              *ngIf="
                form.controls['country'].invalid &&
                (form.controls['country'].dirty ||
                  form.controls['country'].touched)
              "
              class="warn"
            >
              <ng-container *ngIf="form.controls['country'].errors?.required">
                Este campo es requerido.
              </ng-container>
            </mat-hint>
          </mat-form-field>
        </p>
        <!-- <p>
          <mat-form-field
            appearance="outline"
            style="width: 45%; margin-right: 10%"
          >
            <mat-label>Contraseña</mat-label>
            <input
              matInput
              autocomplete="off"
              [type]="hidePassword ? 'password' : 'text'"
              formControlName="password"
            />
            <mat-icon
              matSuffix
              (click)="hidePassword = !hidePassword"
              style="cursor: pointer; user-select: none"
              >{{ hidePassword ? "visibility" : "visibility_off" }}</mat-icon
            >
            <mat-hint
              *ngIf="
                form.controls['password'].invalid &&
                (form.controls['password'].dirty ||
                  form.controls['password'].touched)
              "
              class="warn"
            >
              <ng-container *ngIf="form.controls['password'].errors?.required">
                Este campo es requerido.
              </ng-container>
              <ng-container *ngIf="form.controls['password'].errors?.notEqual">
                Las contraseñas no son iguales.
              </ng-container>
            </mat-hint>
          </mat-form-field>
        </p> -->

        <div>
          <button
            mat-button
            color="accent"
            [disabled]="!form.valid || loading"
            (click)="updateUser()"
          >
            Actualizar
          </button>
          <button
            mat-button
            color="warn"
            [disabled]="!form.valid || loading"
            (click)="deleteUser()"
          >
            Eliminar
          </button>
        </div>
      </form>
    </mat-card-content>
    <mat-progress-bar
      *ngIf="loading"
      mode="indeterminate"
      color="accent"
    ></mat-progress-bar>
  </mat-card>
</div>
